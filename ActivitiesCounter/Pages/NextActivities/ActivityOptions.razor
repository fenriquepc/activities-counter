<div class="activity-options">
	<HxDropdown>
		<HxDropdownToggleElement role="button">
			<i class="fa-solid fa-gear options-button"></i>
		</HxDropdownToggleElement>
		<HxDropdownMenu>
			<HxDropdownItem OnClick="() => myModal.ShowAsync()">
				<i class="fa-regular fa-pen-to-square"></i>
				Editar actividad
			</HxDropdownItem>
			<HxDropdownItem>
				<i class="fa-solid fa-user-gear"></i>
				Detalles de participantes
			</HxDropdownItem>
			<HxDropdownItem>
				<i class="fa-solid fa-trash-can"></i>
				Borrar actividad
			</HxDropdownItem>
		</HxDropdownMenu>
	</HxDropdown>

	<HxModal @ref="myModal" Title="Modal title" Centered="true" >
		<BodyTemplate>
			<EditActivity Callback="HideModal" />
		</BodyTemplate>
	</HxModal>
</div>


@code {
	[CascadingParameter]
	public IModalService ModalService { get; set; } = default!;

	[CascadingParameter]
	private Activity Activity { get; set; }

	[CascadingParameter(Name ="ActivityChanged")]
	private Action ActivityChanged { get; set; }

	private IModalReference _modal;

	private HxModal myModal;


	private void ShowModal()
	{
		var parameters = new ModalParameters()
			//.Add(nameof(EditActivity.Activity), Activity)
			.Add(nameof(EditActivity.Callback), HideModal);
		var options = new ModalOptions()
			{
				Position = ModalPosition.Middle,
				//Class = "edit-activity-modal"
			};

		_modal = ModalService.Show<EditActivity>("Editar actividad", parameters, options);
	}

	private void HideModal()
	{
		myModal.HideAsync();
		ActivityChanged.Invoke();
	}
}
